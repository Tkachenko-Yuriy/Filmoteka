function e(e,t,n,a){Object.defineProperty(e,t,{get:n,set:a,enumerable:!0,configurable:!0})}function t(e){return e&&e.__esModule?e.default:e}var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},a={},o={},i=n.parcelRequired7c6;null==i&&((i=function(e){if(e in a)return a[e].exports;if(e in o){var t=o[e];delete o[e];var n={id:e,exports:{}};return a[e]=n,t.call(n.exports,n,n.exports),n.exports}var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){o[e]=t},n.parcelRequired7c6=i),i.register("kyEFX",(function(t,n){var a,o;e(t.exports,"register",(function(){return a}),(function(e){return a=e})),e(t.exports,"resolve",(function(){return o}),(function(e){return o=e}));var i={};a=function(e){for(var t=Object.keys(e),n=0;n<t.length;n++)i[t[n]]=e[t[n]]},o=function(e){var t=i[e];if(null==t)throw new Error("Could not resolve bundle with id "+e);return t}})),i("kyEFX").register(JSON.parse('{"5ZPII":"index.8e2f8fe3.js","9mItj":"plug_img.1b18cf51.jpg","eVStz":"close_x.576fb31f.svg"}'));const s={jsForm:document.querySelector(".js-form"),search_message:document.querySelector(".js-form__search_message"),jsGallery:document.querySelector(".js-gallery"),jsGalleryList:document.querySelector(".js-gallery-list"),trendingTarget:document.querySelector(".js-trending-target"),searchTarget:document.querySelector(".js-search-target"),jsModal:document.querySelector(".js-modal"),backdrop:document.querySelector(".js-backdrop"),closeModalBtn:document.querySelector(".close_btn"),myLib:document.querySelector(".js-my_lib"),headerWatchedBtn:document.querySelector(".header__watched_btn"),headerQueueBtn:document.querySelector(".header__queue_btn"),jsLoader:document.querySelector(".js-loader"),anchor:document.querySelector(".js-anchor")},r={method:"GET",headers:{accept:"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiIyNzBmNjJhMzE2MTgzM2IyOWYzNTM0ZWYxZDE4ZDVhNiIsInN1YiI6IjY1NjliMzRmNjM1MzZhMDBjNDJhOTRhMSIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.W6n_PVw8L5YbP5E4yWe4QgSA4ZnMDGxzBFCiqZdJHBc"}};function l(e){return fetch(`https://api.themoviedb.org/3/movie/popular?&append_to_response=configuration&language=uk-UK&page=${e}`,r).then((e=>{if(!e.ok)throw new Error(e.status);return e.json()}))}const d={method:"GET",headers:{accept:"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiIyNzBmNjJhMzE2MTgzM2IyOWYzNTM0ZWYxZDE4ZDVhNiIsInN1YiI6IjY1NjliMzRmNjM1MzZhMDBjNDJhOTRhMSIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.W6n_PVw8L5YbP5E4yWe4QgSA4ZnMDGxzBFCiqZdJHBc"}};function c(e,t){return fetch(`https://api.themoviedb.org/3/search/movie?query=${e}&include_adult=false&language=en-US&page=${t}`,d).then((e=>{if(!e.ok)throw new Error(e.status);return e.json()}))}const u={method:"GET",headers:{accept:"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiIyNzBmNjJhMzE2MTgzM2IyOWYzNTM0ZWYxZDE4ZDVhNiIsInN1YiI6IjY1NjliMzRmNjM1MzZhMDBjNDJhOTRhMSIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.W6n_PVw8L5YbP5E4yWe4QgSA4ZnMDGxzBFCiqZdJHBc"}};function m(e){return fetch(`https://api.themoviedb.org/3/movie/${e}?&append_to_response=videos&language=uk-UK`,u).then((e=>{if(!e.ok)throw new Error(e.status);return e.json()}))}const _=[{id:28,name:"Бойовик"},{id:12,name:"Пригоди"},{id:16,name:"Мультфільм"},{id:35,name:"Комедія"},{id:80,name:"Кримінал"},{id:99,name:"Документальний"},{id:18,name:"Драма"},{id:10751,name:"Сімейний"},{id:14,name:"Фентезі"},{id:36,name:"Історичний"},{id:27,name:"Жахи"},{id:10402,name:"Музика"},{id:9648,name:"Детектив"},{id:10749,name:"Мелодрама"},{id:878,name:"Фантастика"},{id:10770,name:"Телефільм"},{id:53,name:"Трилер"},{id:10752,name:"Військовий"},{id:37,name:"Вестерн"}];var h;function f(e){const n=e.map((({genre_ids:e,id:n,poster_path:a,title:o,release_date:i})=>`<li id="${n}" class="gallery__film_item">\n          <a href="" class="gallery__film_link">\n            <div class="thumb">\n            <img class="gallery__film_poster" loading="lazy" src="${null!==a?`https://image.tmdb.org/t/p/w500/${a}`:t(h)}"\n            "alt="${o}"   />\n            </div>\n            <div class="description">\n              <h3 class="description-title link">${o}</h3>\n              <p class="description-text">${i}</p>\n              <p class="description-text">${_.filter((t=>e.includes(t.id))).map((e=>e.name)).slice(0,3).join(",")}</p>\n            </div>\n          </a>\n        </li>`)).join("");s.jsGalleryList.insertAdjacentHTML("beforeend",n)}h=new URL(i("kyEFX").resolve("9mItj"),import.meta.url).toString();var g;function p(e){const n=e.genres.map((e=>e.name)).slice(0,2).join(","),a=e.videos.results;let o="",i="";a.length>=1?i=`${a[0].key}`:(i="",o="is_hidden");const{id:r,poster_path:l,title:d,vote_average:c,vote_count:u,popularity:m,original_title:_,overview:f}=e,p=`<div class="modal__body"> \n                    <div class="modal__film_poster ">\n                      <a class="modal__film_poster_link" ${a.length>=1?`href=https://www.youtube.com/watch?v=${i}`:""} target="_blank">\n                        <img class="modal__film_img img" src="${null!==l?`https://image.tmdb.org/t/p/w500/${l}`:t(h)}" alt="${d}" width="280" height="398">\n                        <span class="watch-icon ${o}"></span>\n                      </a>\n                    </div>\n                    <div id="${r}" class="modal__film_description">\n                      <h2 class="modal__film_title">${d}</h2>\n                      <div class="modal__film_configuration">\n                      <ul class="modal__film_configuration_list list">\n                        <li class="modal__film_configuration_item">Рейтинг</li>\n                        <li class="modal__film_configuration_item">Популярність</li>\n                        <li class="modal__film_configuration_item">Назва</li>\n                        <li class="modal__film_configuration_item">Жанр</li>\n                      </ul>\n                      <ul class="modal__film_configuration_list_value list">\n                        <li class="modal__film_configuration_item"><span class="configuration__vote_averagee_value">${c}</span>&#x02F;<span class="configuration__vote_count_value">${u}</span></li>\n                        <li class="modal__film_configuration_item">${m}</li>\n                        <li class="modal__film_configuration_item">${d}</li>\n                        <li class="modal__film_configuration_item">${n}</li>\n                      </ul>\n                    </div>\n                      <h3 class="modal__film_second_title">Опис</h3>\n                      <p class="modal__film_overview">${f}</p>\n                      <ul class="modal__btn list">\n                        <li><button type="button" class="modal__addToWatched_btn button active_btn"  data-action="addToWatched">\n                          додати в переглянуті\n                        </button></li>\n                        <li><button type="button" class="modal__addToQueue_btn button" data-action="addToQueue">\n                          додати в чергу\n                        </button></li>\n                      </ul>\n                    </div>\n                        <button type="button" class="close_btn" data-action="close-modal">\n                          <img class="close-icon" src=${t(g)} alt="">\n                        </button>\n                        <span class="js-loader"></span>\n                  </div>`;s.jsModal.insertAdjacentHTML("afterbegin",p)}function v(e){const n=e.map((({genres:e,id:n,poster_path:a,title:o,release_date:i})=>{let s=e.map((e=>e.name)).slice(0,3).join(",");return`<li id="${n}" class="gallery__film_item">\n                  <a href="" class="gallery__film_link">\n                    <div class="thumb">\n                      <img class="gallery__film_poster" loading="lazy" src="${null!==a?`https://image.tmdb.org/t/p/w500/${a}`:t(h)}" alt=""   />\n                    </div>\n                    <div class="description">\n                      <h3 class="description-title link">${o}</h3>\n                      <p class="description-text">${i}</p>\n                      <p class="description-text">${s}</p>\n                    </div>\n                  </a>\n                </li>`})).join("");s.jsGalleryList.insertAdjacentHTML("beforeend",n)}g=new URL(i("kyEFX").resolve("eVStz"),import.meta.url).toString();var y={save:(e,t)=>{try{const n=JSON.stringify(t);localStorage.setItem(e,n)}catch(e){console.error("Set state error: ",e.message)}},load:e=>{try{const t=localStorage.getItem(e);return null===t?void 0:JSON.parse(t)}catch(e){console.error("Get state error: ",e.message)}}};let b=[],j=[];function L(e){const t=e.target,n=document.querySelector('button[data-action="addToWatched"]'),a=document.querySelector('button[data-action="addToQueue"]');if(t.classList.contains("modal__addToWatched_btn")){n.setAttribute("disabled","true");m(e.target.closest(".modal__film_description").id).then((e=>{b.push(e),y.save("addToWatched",b)})).catch((e=>console.error(e)))}else if(t.classList.contains("modal__addToQueue_btn")){a.setAttribute("disabled","true");m(e.target.closest(".modal__film_description").id).then((e=>{j.push(e),y.save("addToQueue",j)})).catch((e=>console.error(e)))}else if(t.classList.contains("modal__remove_btn")){const t=e.target.closest(".modal__film_description").id;if(s.headerWatchedBtn.hasAttribute("disabled")){const e=y.load("addToWatched").filter((e=>e.id!==Number(t)));y.save("addToWatched",e),T();v(y.load("addToWatched"))}if(s.headerQueueBtn.hasAttribute("disabled")){const e=y.load("addToQueue").filter((e=>e.id!==Number(t)));y.save("addToQueue",e),T();v(y.load("addToQueue"))}}}function T(){document.body.classList.remove("show-modal"),document.body.classList.remove("no-scroll"),s.jsGalleryList.innerHTML=""}var I={addLoader:function(){s.jsLoader.classList.add("loader")},removeLoader:function(){setTimeout((()=>{s.jsLoader.classList.remove("loader")}),500)}};s.anchor.addEventListener("click",(function(e){e.preventDefault(),document.querySelector(s.anchor.getAttribute("href")).scrollIntoView({behavior:"smooth"})}));let M=1,w="",E={root:null,rootMargin:"900px",threshold:1};s.jsForm.addEventListener("submit",(function(e){if(e.preventDefault(),N.unobserve(s.trendingTarget),M=1,w=e.target.elements.name.value.trim(),""===w)return s.search_message.classList.remove("is_hidden"),void setTimeout((()=>{s.search_message.classList.add("is_hidden")}),3e3);s.jsGalleryList.innerHTML="",c(w,M).then((e=>{if(0===e.results.length)return s.search_message.classList.remove("is_hidden"),void setTimeout((()=>{s.jsForm.reset(),s.search_message.classList.add("is_hidden")}),2e3);I.addLoader(),f(e.results),S.observe(s.searchTarget)})).catch((e=>console.error(e))).finally((()=>I.removeLoader()))}));let N=new IntersectionObserver((function(e,t){e.forEach((e=>{e.isIntersecting&&!J&&(J=!0,M+=1,l(M).then((e=>{I.addLoader(),f(e.results),e.total_pages===M&&t.unobserve(s.trendingTarget)})).catch((e=>console.log(e))).finally((()=>{I.removeLoader(),J=!1})))}))}),E),S=new IntersectionObserver((function(e,t){e.forEach((e=>{e.isIntersecting&&!z&&(z=!0,M+=1,c(w,M).then((e=>{I.addLoader(),f(e.results),e.total_pages===M&&t.unobserve(s.searchTarget)})).catch((e=>console.log(e))).finally((()=>{I.removeLoader(),z=!1})))}))}),E),J=!1,z=!1;function $(e){document.removeEventListener("keydown",W),s.jsModal.removeEventListener("click",L),document.body.classList.remove("show-modal"),document.body.classList.remove("no-scroll")}function W(e){"Escape"===e.code&&$()}l(M).then((e=>{I.addLoader(),f(e.results),N.observe(s.trendingTarget)})).catch((e=>console.error(e))).finally((()=>{I.removeLoader()})),s.jsGalleryList.addEventListener("click",(function(e){e.preventDefault(),s.jsModal.innerHTML="";m(e.target.closest(".gallery__film_item").id).then((e=>{I.addLoader(),document.body.classList.add("show-modal"),document.body.classList.add("no-scroll"),document.addEventListener("keydown",W),s.jsModal.addEventListener("click",L),s.jsModal.addEventListener("click",(e=>{e.target.closest(".close_btn")&&$()})),p(e)})).catch((e=>console.error(e))).finally((()=>I.removeLoader()))})),s.backdrop.addEventListener("click",(function(e){e.currentTarget===e.target&&$()}));
//# sourceMappingURL=index.8e2f8fe3.js.map
