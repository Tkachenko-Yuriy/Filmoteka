!function(){function e(e,t,n,o){Object.defineProperty(e,t,{get:n,set:o,enumerable:!0,configurable:!0})}function t(e){return e&&e.__esModule?e.default:e}var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},o={},a={},r=n.parcelRequired7c6;null==r&&((r=function(e){if(e in o)return o[e].exports;if(e in a){var t=a[e];delete a[e];var n={id:e,exports:{}};return o[e]=n,t.call(n.exports,n,n.exports),n.exports}var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}).register=function(e,t){a[e]=t},n.parcelRequired7c6=r),r.register("iE7OH",(function(t,n){var o,a;e(t.exports,"register",(function(){return o}),(function(e){return o=e})),e(t.exports,"resolve",(function(){return a}),(function(e){return a=e}));var r={};o=function(e){for(var t=Object.keys(e),n=0;n<t.length;n++)r[t[n]]=e[t[n]]},a=function(e){var t=r[e];if(null==t)throw new Error("Could not resolve bundle with id "+e);return t}})),r.register("aNJCr",(function(t,n){var o;e(t.exports,"getBundleURL",(function(){return o}),(function(e){return o=e}));var a={};function r(e){return(""+e).replace(/^((?:https?|file|ftp|(chrome|moz)-extension):\/\/.+)\/[^/]+$/,"$1")+"/"}o=function(e){var t=a[e];return t||(t=function(){try{throw new Error}catch(t){var e=(""+t.stack).match(/(https?|file|ftp|(chrome|moz)-extension):\/\/[^)\n]+/g);if(e)return r(e[2])}return"/"}(),a[e]=t),t}})),r("iE7OH").register(JSON.parse('{"8VPso":"my_library.754117bc.js","9RXJu":"plug_img.1b18cf51.jpg","fiAik":"close_x.576fb31f.svg"}'));var i,c={jsForm:document.querySelector(".js-form"),search_message:document.querySelector(".js-form__search_message"),jsGallery:document.querySelector(".js-gallery"),jsGalleryList:document.querySelector(".js-gallery-list"),trendingTarget:document.querySelector(".js-trending-target"),searchTarget:document.querySelector(".js-search-target"),jsModal:document.querySelector(".js-modal"),backdrop:document.querySelector(".js-backdrop"),closeModalBtn:document.querySelector(".close_btn"),myLib:document.querySelector(".js-my_lib"),headerWatchedBtn:document.querySelector(".header__watched_btn"),headerQueueBtn:document.querySelector(".header__queue_btn"),jsLoader:document.querySelector(".js-loader"),anchor:document.querySelector(".js-anchor")};function s(e){var n=e.map((function(e){var n=e.genres,o=e.id,a=e.poster_path,r=e.title,c=e.release_date,s=n.map((function(e){return e.name})).slice(0,3).join(","),l=null!==a?"https://image.tmdb.org/t/p/w500/".concat(a):t(i);return'<li id="'.concat(o,'" class="gallery__film_item">\n                  <a href="" class="gallery__film_link">\n                    <div class="thumb">\n                      <img class="gallery__film_poster" loading="lazy" src="').concat(l,'" alt=""   />\n                    </div>\n                    <div class="description">\n                      <h3 class="description-title link">').concat(r,'</h3>\n                      <p class="description-text">').concat(c,'</p>\n                      <p class="description-text">').concat(s,"</p>\n                    </div>\n                  </a>\n                </li>")})).join("");c.jsGalleryList.insertAdjacentHTML("beforeend",n)}i=r("aNJCr").getBundleURL("8VPso")+r("iE7OH").resolve("9RXJu");var l={method:"GET",headers:{accept:"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiIyNzBmNjJhMzE2MTgzM2IyOWYzNTM0ZWYxZDE4ZDVhNiIsInN1YiI6IjY1NjliMzRmNjM1MzZhMDBjNDJhOTRhMSIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.W6n_PVw8L5YbP5E4yWe4QgSA4ZnMDGxzBFCiqZdJHBc"}};function d(e){return fetch("".concat("https://api.themoviedb.org","/3/movie/").concat(e,"?&append_to_response=videos&language=uk-UK"),l).then((function(e){if(!e.ok)throw new Error(e.status);return e.json()}))}var u;function m(e){var n=e.genres.map((function(e){return e.name})).slice(0,3).join(","),o=e.videos.results,a="",r="";o.length>=1?r="".concat(o[0].key):(r="",a="is_hidden");var s=e.id,l=e.poster_path,d=e.title,m=e.vote_average,_=e.vote_count,f=e.popularity,h=e.original_title,v=e.overview,g=o.length>=1?"href=https://www.youtube.com/watch?v=".concat(r):"",b=null!==l?"https://image.tmdb.org/t/p/w500/".concat(l):t(i),p='<div class="modal__body"> \n                    <div class="modal__film_poster ">\n                      <a class="modal__film_poster_link" '.concat(g,' target="_blank">\n                        <img class="modal__film_img img" src="').concat(b,'" alt="" width="280" height="398">\n                        <span class="watch-icon ').concat(a,'"></span>\n                      </a>\n                    </div>\n                    <div id="').concat(s,'" class="modal__film_description">\n                      <h2 class="modal__film_title">').concat(d,'</h2>\n                      <div class="modal__film_configuration">\n                      <ul class="modal__film_configuration_list list">\n                        <li class="modal__film_configuration_item">Рейтинг</li>\n                        <li class="modal__film_configuration_item">Популярність</li>\n                        <li class="modal__film_configuration_item">Назва</li>\n                        <li class="modal__film_configuration_item">Жанр</li>\n                      </ul>\n                      <ul class="modal__film_configuration_list_value list">\n                        <li class="modal__film_configuration_item"><span class="configuration__vote_averagee_value">').concat(m,'</span>&#x02F;<span class="configuration__vote_count_value">').concat(_,'</span></li>\n                        <li class="modal__film_configuration_item">').concat(f,'</li>\n                        <li class="modal__film_configuration_item">').concat(h,'</li>\n                        <li class="modal__film_configuration_item">').concat(n,'</li>\n                      </ul>\n                      </div>\n                      <h3 class="modal__film_second_title">Опис</h3>\n                      <p class="modal__film_overview">').concat(v,'</p>\n                      <button type="button" class="modal__remove_btn button"  data-action="removeLs">\n                          Видалити з черги\n                      </button>\n                  </div>\n                      <button type="button" class="close_btn" data-action="close-modal">\n                        <img class="close-icon" src=').concat(t(u),' alt="">\n                      </button>\n                </div>');c.jsModal.insertAdjacentHTML("afterbegin",p)}u=r("aNJCr").getBundleURL("8VPso")+r("iE7OH").resolve("fiAik");var _={save:function(e,t){try{var n=JSON.stringify(t);localStorage.setItem(e,n)}catch(e){console.error("Set state error: ",e.message)}},load:function(e){try{var t=localStorage.getItem(e);return null===t?void 0:JSON.parse(t)}catch(e){console.error("Get state error: ",e.message)}}},f="addToWatched",h="addToQueue",v=[],g=[];function b(e){var t=e.target,n=document.querySelector('button[data-action="addToWatched"]'),o=document.querySelector('button[data-action="addToQueue"]');if(t.classList.contains("modal__addToWatched_btn"))n.setAttribute("disabled","true"),d(e.target.closest(".modal__film_description").id).then((function(e){v.push(e),_.save(f,v)})).catch((function(e){return console.error(e)}));else if(t.classList.contains("modal__addToQueue_btn")){o.setAttribute("disabled","true"),d(e.target.closest(".modal__film_description").id).then((function(e){g.push(e),_.save(h,g)})).catch((function(e){return console.error(e)}))}else if(t.classList.contains("modal__remove_btn")){var a=e.target.closest(".modal__film_description").id;if(c.headerWatchedBtn.hasAttribute("disabled")){var r=_.load(f).filter((function(e){return e.id!==Number(a)}));_.save(f,r),p(),s(_.load(f))}if(c.headerQueueBtn.hasAttribute("disabled")){var i=_.load(h).filter((function(e){return e.id!==Number(a)}));_.save(h,i),p(),s(_.load(h))}}}function p(){document.body.classList.remove("show-modal"),document.body.classList.remove("no-scroll"),c.jsGalleryList.innerHTML=""}var y={addLoader:function(){c.jsLoader.classList.add("loader")},removeLoader:function(){setTimeout((function(){c.jsLoader.classList.remove("loader")}),500)}};c.anchor.addEventListener("click",(function(e){e.preventDefault(),document.querySelector(c.anchor.getAttribute("href")).scrollIntoView({behavior:"smooth"})}));function L(){c.headerWatchedBtn.setAttribute("disabled","true"),c.headerQueueBtn.removeAttribute("disabled"),c.headerWatchedBtn.classList.add("active_btn"),c.headerQueueBtn.classList.remove("active_btn"),c.jsGalleryList.innerHTML="";var e=_.load("addToWatched");e&&s(e)}function j(){document.removeEventListener("keydown",S),document.body.classList.remove("show-modal"),document.body.classList.remove("no-scroll")}function w(e){e.currentTarget===e.target&&j()}function S(e){"Escape"===e.code&&j()}c.headerWatchedBtn.addEventListener("click",L),c.headerQueueBtn.addEventListener("click",(function(){c.headerQueueBtn.setAttribute("disabled","true"),c.headerWatchedBtn.removeAttribute("disabled"),c.headerWatchedBtn.classList.remove("active_btn"),c.headerQueueBtn.classList.add("active_btn"),c.jsGalleryList.innerHTML="";var e=_.load("addToQueue");if(!e)return;s(e)})),c.myLib.classList.contains("current_page")&&L(),c.jsGalleryList.addEventListener("click",(function(e){e.preventDefault(),c.jsModal.innerHTML="",d(e.target.closest(".gallery__film_item").id).then((function(e){y.addLoader(),document.body.classList.add("show-modal"),document.body.classList.add("no-scroll"),document.addEventListener("keydown",S),c.backdrop.addEventListener("click",w),c.jsModal.addEventListener("click",b),c.jsModal.addEventListener("click",(function(e){e.target.closest(".close_btn")&&j()})),m(e)})).catch((function(e){return console.error(e)})).finally((function(){return y.removeLoader()}))}))}();
//# sourceMappingURL=my_library.754117bc.js.map
